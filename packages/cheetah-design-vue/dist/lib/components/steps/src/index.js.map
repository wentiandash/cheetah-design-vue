{"version":3,"file":"index.js","sources":["../../../../../src/components/steps/src/index.tsx"],"sourcesContent":["import type { ExtractPropTypes, PropType, Ref } from 'vue'\nimport { defineComponent } from 'vue'\nimport { useExpose, useStep } from '../../../composables'\nimport Button from '../../button'\nimport Icon from '../../icon'\n\nexport interface StepsItem {\n  name: string\n  description?: string\n  icon?: string\n  state?: 'pending' | 'processing' | 'done'\n  result?: 'success' | 'fail' | 'exception'\n}\nexport type StepsProps = ExtractPropTypes<typeof stepsProps>\nexport type StepsToggleOptions = Pick<StepsItem, 'state' | 'result'>\nexport type StepsInstance = HTMLElement & {\n  current: Ref<number>\n  toggle: (stepIndex: number, options: StepsToggleOptions) => any\n}\n\nconst stepsProps = {\n  modelValue: {\n    type: Array as PropType<StepsItem[]>,\n    require: true,\n  },\n  vertical: Boolean,\n}\n\nexport default defineComponent({\n  name: 'Steps',\n  props: stepsProps,\n  emits: ['update:modelValue'],\n  setup(props, { emit }) {\n    const { steps, current, toggle: _toggle } = useStep<StepsItem>(props.modelValue!, emit)\n\n    const toggle = (stepIndex: number, options: StepsToggleOptions) => {\n      steps.value[stepIndex] = Object.assign(steps.value[stepIndex], options)\n      if (steps.value[stepIndex].state !== 'pending') {\n        steps.value[stepIndex - 1].state = 'done'\n        steps.value[stepIndex - 1].result = 'success'\n      }\n\n      if (steps.value[stepIndex].result === 'success' || !steps.value[stepIndex].result)\n        steps.value[stepIndex + 1].state = 'processing'\n\n      _toggle(stepIndex)\n    }\n\n    useExpose({\n      current,\n      toggle,\n    })\n\n    return () => (\n      <div class={['ch-steps', props.vertical && '__vertical']}>\n        {steps.value?.map((step, index) => (\n          <>\n            <div class={['ch-steps-item', props.vertical && '__vertical']}>\n              <Button\n                mode={\n                  step.state === 'processing'\n                    ? 'outline'\n                    : step.state === 'done'\n                      ? 'solid'\n                      : 'white'\n                }\n                state={\n                  step.state === 'done'\n                    ? step.result === 'exception'\n                      ? 'warning'\n                      : step.result === 'fail'\n                        ? 'danger'\n                        : 'success'\n                    : 'primary'\n                }\n                size='small'\n                shape='circle'\n              >\n                {\n                  step.icon\n                    ? <Icon name={step.icon} />\n                    : index + 1\n                }\n              </Button>\n              <div class={['ch-steps-content', props.vertical && '__vertical']}>\n                <div class='ch-steps-item-name'>{step.name}</div>\n                <div class='ch-steps-item-description'>{step.description}</div>\n              </div>\n            </div>\n            {index + 1 !== steps.value?.length && <div class={['ch-steps-item-pipe', props.vertical && '__vertical']} />}\n          </>\n        ))}\n      </div>\n    )\n  },\n})\n"],"names":["defineComponent","useStep","useExpose","_createVNode","index","_Fragment","Button","Icon","_a"],"mappings":";;;;;;;AAKA,MAAM,aAAa;AAAA,EACjB,YAAY;AAAA,IACV,MAAM;AAAA,IACN,SAAS;AAAA,EACV;AAAA,EACD,UAAU;AACZ;AACA,MAAe,QAAgBA,oCAAgB;AAAA,EAC7C,MAAM;AAAA,EACN,OAAO;AAAA,EACP,OAAO,CAAC,mBAAmB;AAAA,EAC3B,MAAM,OAAO;AAAA,IACX;AAAA,EACJ,GAAK;AACD,UAAM;AAAA,MACJ;AAAA,MACA;AAAA,MACA,QAAQ;AAAA,IACT,IAAGC,gBAAQ,MAAM,YAAY,IAAI;AAClC,UAAM,SAAS,CAAC,WAAW,YAAY;AACrC,YAAM,MAAM,SAAS,IAAI,OAAO,OAAO,MAAM,MAAM,SAAS,GAAG,OAAO;AACtE,UAAI,MAAM,MAAM,SAAS,EAAE,UAAU,WAAW;AAC9C,cAAM,MAAM,YAAY,CAAC,EAAE,QAAQ;AACnC,cAAM,MAAM,YAAY,CAAC,EAAE,SAAS;AAAA,MACrC;AACD,UAAI,MAAM,MAAM,SAAS,EAAE,WAAW,aAAa,CAAC,MAAM,MAAM,SAAS,EAAE;AAAQ,cAAM,MAAM,YAAY,CAAC,EAAE,QAAQ;AACtH,cAAQ,SAAS;AAAA,IACvB;AACIC,wBAAU;AAAA,MACR;AAAA,MACA;AAAA,IACN,CAAK;AACD,WAAO,MAAA;;AAAMC,iBAAY,YAAC,OAAO;AAAA,QAC/B,SAAS,CAAC,YAAY,MAAM,YAAY,YAAY;AAAA,MACrD,GAAE,EAAC,WAAM,UAAN,mBAAa,IAAI,CAAC,MAAMC,YAAUD;;AAAAA,mBAAAA,YAAaE,IAAAA,UAAW,MAAM,CAACF,IAAAA,YAAa,OAAO;AAAA,UACvF,SAAS,CAAC,iBAAiB,MAAM,YAAY,YAAY;AAAA,QAC/D,GAAO,CAACA,IAAY,YAACG,gBAAQ;AAAA,UACvB,QAAQ,KAAK,UAAU,eAAe,YAAY,KAAK,UAAU,SAAS,UAAU;AAAA,UACpF,SAAS,KAAK,UAAU,SAAS,KAAK,WAAW,cAAc,YAAY,KAAK,WAAW,SAAS,WAAW,YAAY;AAAA,UAC3H,QAAQ;AAAA,UACR,SAAS;AAAA,QACf,GAAO;AAAA,UACD,SAAS,MAAM,CAAC,KAAK,OAAOH,IAAAA,YAAaI,QAAAA,QAAM;AAAA,YAC7C,QAAQ,KAAK;AAAA,UACrB,GAAS,IAAI,IAAIH,UAAQ,CAAC;AAAA,QAC1B,CAAK,GAAGD,IAAY,YAAC,OAAO;AAAA,UACtB,SAAS,CAAC,oBAAoB,MAAM,YAAY,YAAY;AAAA,QAClE,GAAO,CAACA,IAAY,YAAC,OAAO;AAAA,UACtB,SAAS;AAAA,QACV,GAAE,CAAC,KAAK,IAAI,CAAC,GAAGA,IAAAA,YAAa,OAAO;AAAA,UACnC,SAAS;AAAA,QACV,GAAE,CAAC,KAAK,WAAW,CAAC,CAAC,CAAC,CAAC,CAAC,GAAGC,UAAQ,QAAMI,MAAA,MAAM,UAAN,gBAAAA,IAAa,WAAUL,IAAAA,YAAa,OAAO;AAAA,UACnF,SAAS,CAAC,sBAAsB,MAAM,YAAY,YAAY;AAAA,QAC/D,GAAE,IAAI,CAAC,CAAC;AAAA,QAAE,CAAC;AAAA;AAAA,EACb;AACH,CAAC;;"}