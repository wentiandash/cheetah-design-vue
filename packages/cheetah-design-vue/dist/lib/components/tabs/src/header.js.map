{"version":3,"file":"header.js","sources":["../../../../../src/components/tabs/src/header.tsx"],"sourcesContent":["import { computed, defineComponent, inject, nextTick, onMounted, ref } from 'vue'\nimport type { ButtonProps } from '../../button'\nimport Button from '../../button'\nimport { PL_TAB_KEY } from '.'\n\nexport interface TabHeader extends ButtonProps {\n  id: number\n  name?: string\n}\n\nexport default defineComponent({\n  setup() {\n    const { currentPaneId, headers, placement } = inject(PL_TAB_KEY)!\n    const btnsWrpper = ref<HTMLElement>()\n    const btns = ref<HTMLElement[]>()\n\n    const thumbStyle = computed(() => {\n      if (!btns.value)\n        return\n\n      if (placement.value === 'top') {\n        const width = `${btns.value[currentPaneId.value].clientWidth}px`\n        const transform = `translateX(${btns.value[currentPaneId.value].offsetLeft}px)`\n        return {\n          width,\n          transform,\n        }\n      }\n      const height = `${btns.value[currentPaneId.value].clientHeight}px`\n      const transform = `translateY(${btns.value[currentPaneId.value].offsetTop}px)`\n\n      return {\n        height,\n        transform,\n      }\n    })\n\n    onMounted(() => {\n      nextTick(() => {\n        btns.value = Array.from(btnsWrpper.value!.children) as HTMLElement[]\n      })\n    })\n\n    const onClick = (id: number) => {\n      return () => currentPaneId.value = id\n    }\n\n    const renderHeaderButton = (hd: TabHeader) => (\n      <Button\n        {...hd}\n        mode='link'\n        state={currentPaneId.value === hd.id ? 'primary' : 'info'}\n        onClick={onClick(hd.id)}\n      >\n        {hd.name}\n      </Button>\n    )\n\n    return () => (\n      <div class={['ch-tabs-header', placement.value]}>\n        <div\n          ref={btnsWrpper}\n          class={['ch-tabs-button', placement.value]}\n        >\n          {headers.value.map(hd => renderHeaderButton(hd))}\n        </div>\n        <div class={['ch-tabs-slideway', placement.value]}>\n          <div class='ch-tabs-thumb' style={thumbStyle.value}/>\n        </div>\n      </div>\n    )\n  },\n})\n"],"names":["defineComponent","inject","PL_TAB_KEY","ref","computed","transform","onMounted","nextTick","_createVNode","Button","_mergeProps"],"mappings":";;;;;AAIA,MAAe,SAAgBA,oCAAgB;AAAA,EAC7C,QAAQ;AACN,UAAM;AAAA,MACJ;AAAA,MACA;AAAA,MACA;AAAA,IACN,IAAQC,IAAAA,OAAOC,MAAAA,UAAU;AACrB,UAAM,aAAaC,IAAAA;AACnB,UAAM,OAAOA,IAAAA;AACb,UAAM,aAAaC,IAAAA,SAAS,MAAM;AAChC,UAAI,CAAC,KAAK;AAAO;AACjB,UAAI,UAAU,UAAU,OAAO;AAC7B,cAAM,QAAQ,GAAG,KAAK,MAAM,cAAc,KAAK,EAAE,WAAW;AAC5D,cAAMC,aAAY,cAAc,KAAK,MAAM,cAAc,KAAK,EAAE,UAAU;AAC1E,eAAO;AAAA,UACL;AAAA,UACA,WAAAA;AAAA,QACV;AAAA,MACO;AACD,YAAM,SAAS,GAAG,KAAK,MAAM,cAAc,KAAK,EAAE,YAAY;AAC9D,YAAM,YAAY,cAAc,KAAK,MAAM,cAAc,KAAK,EAAE,SAAS;AACzE,aAAO;AAAA,QACL;AAAA,QACA;AAAA,MACR;AAAA,IACA,CAAK;AACDC,QAAAA,UAAU,MAAM;AACdC,UAAAA,SAAS,MAAM;AACb,aAAK,QAAQ,MAAM,KAAK,WAAW,MAAM,QAAQ;AAAA,MACzD,CAAO;AAAA,IACP,CAAK;AACD,UAAM,UAAU,QAAM;AACpB,aAAO,MAAM,cAAc,QAAQ;AAAA,IACzC;AACI,UAAM,qBAAqB,QAAMC,IAAAA,YAAaC,QAAAA,UAAQC,IAAAA,WAAY,IAAI;AAAA,MACpE,QAAQ;AAAA,MACR,SAAS,cAAc,UAAU,GAAG,KAAK,YAAY;AAAA,MACrD,WAAW,QAAQ,GAAG,EAAE;AAAA,IAC9B,CAAK,GAAG;AAAA,MACF,SAAS,MAAM,CAAC,GAAG,IAAI;AAAA,IAC7B,CAAK;AACD,WAAO,MAAMF,IAAY,YAAC,OAAO;AAAA,MAC/B,SAAS,CAAC,kBAAkB,UAAU,KAAK;AAAA,IACjD,GAAO,CAACA,IAAY,YAAC,OAAO;AAAA,MACtB,OAAO;AAAA,MACP,SAAS,CAAC,kBAAkB,UAAU,KAAK;AAAA,IAC5C,GAAE,CAAC,QAAQ,MAAM,IAAI,QAAM,mBAAmB,EAAE,CAAC,CAAC,CAAC,GAAGA,IAAAA,YAAa,OAAO;AAAA,MACzE,SAAS,CAAC,oBAAoB,UAAU,KAAK;AAAA,IACnD,GAAO,CAACA,IAAY,YAAC,OAAO;AAAA,MACtB,SAAS;AAAA,MACT,SAAS,WAAW;AAAA,IAC1B,GAAO,IAAI,CAAC,CAAC,CAAC,CAAC;AAAA,EACZ;AACH,CAAC;;"}