{"version":3,"file":"index.mjs","sources":["../../../../../src/components/drawer/src/index.tsx"],"sourcesContent":["import { type ExtractPropTypes, type PropType, Teleport, Transition, computed, defineComponent } from 'vue'\nimport { type ToggleHandler } from '../../../composables'\nimport { useModal } from '../../../composables'\nimport { animation, uppercaseFirstWord } from '../../../utils'\nimport Button from '../../button'\n\nexport interface DarwerInstance extends ToggleHandler, HTMLElement {}\nexport type DarwerProps = ExtractPropTypes<typeof darwerProps>\ntype ShakeOffProp = 'x-button' | 'mask' | 'header'\n\nconst darwerProps = {\n  shakeOff: {\n    type: Array as PropType<ShakeOffProp[]>,\n    default: () => [],\n  },\n  placement: {\n    type: String as PropType<'top' | 'bottom' | 'left' | 'right'>,\n    default: 'left',\n  },\n  fullscreen: Boolean,\n}\n\nexport default defineComponent({\n  name: 'Drawer',\n  props: darwerProps,\n  emits: [\n    'open',\n    'close',\n  ],\n  setup(props, { slots, emit }) {\n    const { modal } = useModal(emit)\n\n    const style = computed(() => {\n      if (props.placement === 'left' || props.placement === 'right') {\n        return {\n          minWidth: props.fullscreen ? '100%' : '350px',\n          top: 0,\n          bottom: 0,\n          [props.placement]: 0,\n        }\n      }\n      else if (props.placement === 'top' || props.placement === 'bottom') {\n        return {\n          height: props.fullscreen ? '100%' : 0,\n          minHeight: '350px',\n          left: 0,\n          right: 0,\n          [props.placement]: 0,\n        }\n      }\n      return {}\n    })\n\n    const animate = computed(() => {\n      const inSuffix = uppercaseFirstWord(props.placement === 'top'\n        ? 'down'\n        : props.placement === 'bottom'\n          ? 'up'\n          : props.placement,\n      )\n      const outSuffix = uppercaseFirstWord(props.placement === 'top'\n        ? 'up'\n        : props.placement === 'bottom'\n          ? 'down'\n          : props.placement,\n      )\n      return {\n        enter: animation(`slideIn${inSuffix}`),\n        leave: animation(`slideOut${outSuffix}`),\n      }\n    })\n\n    const isShake = (prop: ShakeOffProp) => props.shakeOff.includes(prop)\n\n    const renderMask = () => {\n      if (!isShake('mask'))\n        return <div class='ch-mask' v-show={modal.state.value} />\n    }\n\n    const renderDrawer = () => {\n      const renderHeader = () => {\n        if (isShake('header'))\n          return\n\n        const renderXButton = () => {\n          if (!isShake('x-button')) {\n            return (\n              <Button\n                mode='link'\n                state='info'\n                icon-left='x-lg'\n                onClick={modal.close}\n              />\n            )\n          }\n        }\n\n        return (\n          <header>\n            <h3>Darwer header</h3>\n            {renderXButton()}\n          </header>\n        )\n      }\n      return (\n        <div class='ch-drawer-default'>\n          {renderHeader()}\n          <section>\n            {slots.default?.()}\n          </section>\n        </div>\n      )\n    }\n\n    return () => (\n      <Teleport to='body'>\n        {renderMask()}\n        <Transition\n          enter-active-class={animation(animate.value.enter)}\n          leave-active-class={animation(animate.value.leave)}\n          appear\n        >\n          <div\n            ref={modal}\n            class='ch-drawer'\n            style={style.value}\n            v-show={modal.state.value}\n          >\n            {slots.headless?.() || renderDrawer()}\n          </div>\n       </Transition>\n      </Teleport>\n    )\n  },\n})\n"],"names":["_withDirectives","_createVNode","_vShow","Button","_createTextVNode"],"mappings":"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"}