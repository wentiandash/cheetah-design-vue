{"version":3,"file":"copy.mjs","sources":["../../../../../src/components/table/src/copy.ts"],"sourcesContent":["import { toRaw } from 'vue'\nimport { config } from '.'\n\nlet cellData = ''\nlet columnKey = ''\nlet rowData = {}\nconst columnData: string[] = []\n\nexport const copyRow = () => {\n  Reflect.deleteProperty(rowData, 'children')\n  copy(\n    Object.values(rowData).filter((_, index) => index < config.value.columns.length).join(' '),\n  )\n}\n\nexport const copyColumn = () => {\n  columnData.length = 0\n  getColumnData(config.value.data)\n  copy(columnData.join('\\n'))\n\n  function getColumnData(data: Record<string, any>[]) {\n    data.forEach((row) => {\n      columnData.push(row[columnKey])\n\n      if (row.children)\n        getColumnData(row.children)\n    })\n  }\n}\n\nexport const copyCell = () => {\n  copy(cellData)\n}\n\nexport const handelCopy = (row: Record<string, any>, key: string, cell: any) => {\n  rowData = toRaw(row)\n  cellData = cell\n  columnKey = key\n}\n\nfunction copy(source: string) {\n  if (navigator && 'clipboard' in navigator) {\n    navigator.clipboard.writeText(source)\n  }\n  else {\n    const ta = document.createElement('textarea')\n    ta.value = source ?? ''\n    ta.style.position = 'absolute'\n    ta.style.opacity = '0'\n    document.body.appendChild(ta)\n    ta.select()\n    document.execCommand('copy')\n    ta.remove()\n  }\n}\n"],"names":[],"mappings":";;AAGA,IAAI,WAAW;AACf,IAAI,YAAY;AAChB,IAAI,UAAU,CAAA;AACd,MAAM,aAAuB,CAAA;AAEtB,MAAM,UAAU,MAAM;AACnB,UAAA,eAAe,SAAS,UAAU;AAC1C;AAAA,IACE,OAAO,OAAO,OAAO,EAAE,OAAO,CAAC,GAAG,UAAU,QAAQ,OAAO,MAAM,QAAQ,MAAM,EAAE,KAAK,GAAG;AAAA,EAAA;AAE7F;AAEO,MAAM,aAAa,MAAM;AAC9B,aAAW,SAAS;AACN,gBAAA,OAAO,MAAM,IAAI;AAC1B,OAAA,WAAW,KAAK,IAAI,CAAC;AAE1B,WAAS,cAAc,MAA6B;AAC7C,SAAA,QAAQ,CAAC,QAAQ;AACT,iBAAA,KAAK,IAAI,SAAS,CAAC;AAE9B,UAAI,IAAI;AACN,sBAAc,IAAI,QAAQ;AAAA,IAAA,CAC7B;AAAA,EACH;AACF;AAEO,MAAM,WAAW,MAAM;AAC5B,OAAK,QAAQ;AACf;AAEO,MAAM,aAAa,CAAC,KAA0B,KAAa,SAAc;AAC9E,YAAU,MAAM,GAAG;AACR,aAAA;AACC,cAAA;AACd;AAEA,SAAS,KAAK,QAAgB;AACxB,MAAA,aAAa,eAAe,WAAW;AAC/B,cAAA,UAAU,UAAU,MAAM;AAAA,EAAA,OAEjC;AACG,UAAA,KAAK,SAAS,cAAc,UAAU;AAC5C,OAAG,QAAQ,UAAU;AACrB,OAAG,MAAM,WAAW;AACpB,OAAG,MAAM,UAAU;AACV,aAAA,KAAK,YAAY,EAAE;AAC5B,OAAG,OAAO;AACV,aAAS,YAAY,MAAM;AAC3B,OAAG,OAAO;AAAA,EACZ;AACF;"}