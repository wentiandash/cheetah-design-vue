{"version":3,"file":"index.mjs","sources":["../../../../../src/components/dropdown/src/index.tsx"],"sourcesContent":["import { type ExtractPropTypes, type PropType, defineComponent } from 'vue'\nimport type { Placement } from '@floating-ui/vue'\nimport Dropdown from '..'\nimport Button from '../../button'\nimport Badge from '../../badge'\nimport Popover from '../../popover'\nimport type { ButtonProps } from '../../button'\nimport type { BadgeProps } from '../../badge'\n\nexport type DropdownProps = ExtractPropTypes<typeof dropdownProps>\n\nexport interface DropdownData {\n  name: string\n  value?: any\n  title?: string\n  divider?: boolean\n  disabled?: boolean\n  button?: Partial<Pick<ButtonProps, 'state' | 'mode' | 'iconLeft' | 'iconRight'> & { badge: Partial<BadgeProps> }>\n  callback?: () => void\n  children?: DropdownData[]\n}\n\nconst dropdownProps = {\n  placement: {\n    type: String as PropType<Placement>,\n    default: 'bottom',\n  },\n  trigger: {\n    type: [String, Boolean] as PropType<'hover' | 'click' | boolean>,\n    default: 'hover',\n  },\n  data: {\n    type: Array as PropType<DropdownData[]>,\n    default: () => [],\n  },\n}\n\nexport default defineComponent({\n  name: 'Dropdown',\n  props: dropdownProps,\n  emits: ['click'],\n  setup(props, { slots, emit }) {\n    const onClick = (item: DropdownData) => {\n      return (evt: MouseEvent) => {\n        emit('click', item)\n        if (item.callback)\n          item.callback()\n\n        if (!item.children) {\n          evt.stopPropagation()\n          document.documentElement.click()\n        }\n      }\n    }\n\n    const renderMenuButton = (item: DropdownData) => (\n      <>\n        {item.title && <div class=\"ch-dropdown-title\">{item.title}</div>}\n        {\n          <Button\n            mode=\"ghost\"\n            size='small'\n            state=\"info\"\n            disabled={item.disabled}\n            onClick={onClick(item)}\n            {...item.button}\n          >\n            <div class=\"ch-dropdown-button\">\n              {item.name}\n              {item.button?.badge && <Badge {...item.button.badge} />}\n            </div>\n          </Button>\n        }\n        {item.divider && <div class=\"ch-dropdown-divider\" />}\n      </>\n    )\n\n    const renderDropdown = () => (\n      <>\n        <div\n          v-show={props.data.length}\n          class=\"ch-dropdown-menu\"\n        >\n          {\n            props.data.map((item) => {\n              if (item.children) {\n                return (\n                  <Dropdown\n                    class=\"ch-dropdown-child\"\n                    data={item.children}\n                    trigger={props.trigger}\n                    placement='right-start'\n                    v-slots={{\n                      reference: () => renderMenuButton(item),\n                    }}\n                  />\n                )\n              }\n              return renderMenuButton(item)\n            })\n          }\n        </div>\n        <div\n          v-show={!props.data.length}\n          class=\"ch-dropdown-menu\"\n        >\n          No Data\n        </div>\n      </>\n    )\n\n    return () => (\n      <Popover\n        v-slots={{\n          reference: slots.reference,\n          headless: slots.headless || renderDropdown,\n        }}\n        {...props}\n      />\n    )\n  },\n})\n"],"names":["_createVNode","_Fragment","Button","_mergeProps","Badge","_withDirectives","Dropdown","_vShow","_createTextVNode","Popover"],"mappings":";;;;;AAMA,MAAM,gBAAgB;AAAA,EACpB,WAAW;AAAA,IACT,MAAM;AAAA,IACN,SAAS;AAAA,EACV;AAAA,EACD,SAAS;AAAA,IACP,MAAM,CAAC,QAAQ,OAAO;AAAA,IACtB,SAAS;AAAA,EACV;AAAA,EACD,MAAM;AAAA,IACJ,MAAM;AAAA,IACN,SAAS,MAAM,CAAE;AAAA,EAClB;AACH;AACA,MAAe,WAAgB,gCAAgB;AAAA,EAC7C,MAAM;AAAA,EACN,OAAO;AAAA,EACP,OAAO,CAAC,OAAO;AAAA,EACf,MAAM,OAAO;AAAA,IACX;AAAA,IACA;AAAA,EACJ,GAAK;AACD,UAAM,UAAU,UAAQ;AACtB,aAAO,SAAO;AACZ,aAAK,SAAS,IAAI;AAClB,YAAI,KAAK;AAAU,eAAK,SAAQ;AAChC,YAAI,CAAC,KAAK,UAAU;AAClB,cAAI,gBAAe;AACnB,mBAAS,gBAAgB;QAC1B;AAAA,MACT;AAAA,IACA;AACI,UAAM,mBAAmB,UAAQA,YAAaC,UAAW,MAAM,CAAC,KAAK,SAASD,YAAa,OAAO;AAAA,MAChG,SAAS;AAAA,IACf,GAAO,CAAC,KAAK,KAAK,CAAC,GAAGA,YAAaE,UAAQC,WAAY;AAAA,MACjD,QAAQ;AAAA,MACR,QAAQ;AAAA,MACR,SAAS;AAAA,MACT,YAAY,KAAK;AAAA,MACjB,WAAW,QAAQ,IAAI;AAAA,IAC7B,GAAO,KAAK,MAAM,GAAG;AAAA,MACf,SAAS,MAAA;;AAAM,gBAACH,YAAa,OAAO;AAAA,UAClC,SAAS;AAAA,QACV,GAAE,CAAC,KAAK,QAAM,UAAK,WAAL,mBAAa,UAASA,YAAaI,SAAO,KAAK,OAAO,OAAO,IAAI,CAAC,CAAC,CAAC;AAAA;AAAA,IACpF,CAAA,GAAG,KAAK,WAAWJ,YAAa,OAAO;AAAA,MACtC,SAAS;AAAA,IACf,GAAO,IAAI,CAAC,CAAC;AACT,UAAM,iBAAiB,MAAMA,YAAaC,UAAW,MAAM,CAACI,eAAgBL,YAAa,OAAO;AAAA,MAC9F,SAAS;AAAA,IACV,GAAE,CAAC,MAAM,KAAK,IAAI,UAAQ;AACzB,UAAI,KAAK,UAAU;AACjB,eAAOA,YAAaM,YAAU;AAAA,UAC5B,SAAS;AAAA,UACT,QAAQ,KAAK;AAAA,UACb,WAAW,MAAM;AAAA,UACjB,aAAa;AAAA,QACvB,GAAW;AAAA,UACD,WAAW,MAAM,iBAAiB,IAAI;AAAA,QAChD,CAAS;AAAA,MACF;AACD,aAAO,iBAAiB,IAAI;AAAA,IAC7B,CAAA,CAAC,CAAC,GAAG,CAAC,CAACC,OAAQ,MAAM,KAAK,MAAM,CAAC,CAAC,GAAGF,eAAgBL,YAAa,OAAO;AAAA,MACxE,SAAS;AAAA,IACV,GAAE,CAACQ,gBAAiB,SAAS,CAAC,CAAC,GAAG,CAAC,CAACD,OAAQ,CAAC,MAAM,KAAK,MAAM,CAAC,CAAC,CAAC,CAAC;AACnE,WAAO,MAAMP,YAAaS,WAAS,OAAO;AAAA,MACxC,WAAW,MAAM;AAAA,MACjB,UAAU,MAAM,YAAY;AAAA,IAClC,CAAK;AAAA,EACF;AACH,CAAC;"}